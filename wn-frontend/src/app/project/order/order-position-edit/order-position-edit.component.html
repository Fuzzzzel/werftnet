<div class="card">
  <div class="card-body">
    <div class="row no-gutters">
      <div class="col-md-1">
        {{ positionToEdit.pos_no_string }}
      </div>
      <div class="col-md">
        <div class="row">
          <div class="col-md-8">
            <div class="form-group row">
              <div class="col-md">
                <select class="form-control form-control-sm" name="edit-position-lng_source" [(ngModel)]="positionToEdit.lng_source"
                  [compareWith]='util.compareById'>
                  <option [value]='undefined' selected>-- Quellsprache --</option>
                  <option *ngFor="let option of coreData.languages_flat.values" [ngValue]="option">{{ option.name }}</option>
                </select>
              </div>
              <div class="col-md">
                <select class="form-control form-control-sm" name="edit-position-lng_target" [(ngModel)]="positionToEdit.lng_target"
                  [compareWith]='util.compareById'>
                  <option [value]='undefined' selected>-- Zielsprache --</option>
                  <option *ngFor="let option of coreData.languages_flat.values" [ngValue]="option">{{ option.name }}</option>
                </select>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group row">
              <div class="col-md-5">
                <input type="number" step="any" class="form-control form-control-sm" name="edit-position-customer_price"
                  [(ngModel)]="positionToEdit.customer_price" placeholder="Preis">
              </div>
              <div class="col-md-7">
                <button type="button" class="btn btn-sm btn-primary float-right mx-1" (click)="savePosition()">
                  <span class="clickable iconsmall">
                    <i class="fa fa-floppy-o"></i>
                  </span>
                </button>
                <button type="button" class="btn btn-sm btn-default float-right mx-1" (click)="cancelEdit()">
                  <span class="clickable iconsmall">
                    <i class="fa fa-times"></i>
                  </span>
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-8">
            <div class="form-group">
              <input class="form-control form-control-sm" name="edit-position-title" [(ngModel)]="positionToEdit.title"
                placeholder="Titel">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="form-group row">
              <div class="col-md-8">
                <textarea placeholder="Positionsbeschreibung" class="form-control form-control-sm" rows="4" name="edit-position-description"
                  [(ngModel)]="positionToEdit.description"></textarea>
              </div>
              <div class="col-md-4">
                <textarea placeholder="Interne Notiz" class="form-control form-control-sm" rows="4" name="edit-position-internal-note"
                  [(ngModel)]="positionToEdit.internal_note"></textarea>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Tasks begin -->
    <div class="row">
      <div class="col-md-12">
        <button type="button" class="btn btn-sm btn-primary mx-1 float-right" (click)="createNewOrderTask()">
          <span class="iconsmall">
            <i class="fa fa-plus"></i>
          </span>
        </button>
        <h4 class="card-title">Aufgaben</h4>
      </div>
    </div>
    <div class="row no-gutters" *ngFor="let task of positionToEdit.tasks">
      <app-order-task-view class="col-md-12" [task]="task" (save)="saveOrderTask($event)"></app-order-task-view>
    </div>
  </div>
</div>