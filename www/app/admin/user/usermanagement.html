<!-- Modal für das Bearbeiten/Anlegen eines Benutzers -->
<script type="text/ng-template" id="UserEditModalContent.html">
    <div class="modal-header">
        <h3 class="modal-title" id="modal-title">{{ ModalEditUserCtrl.userEditTemp.id ? 'Benuterdaten bearbeiten' :
            'Benutzer anlegen '}}</h3>
    </div>
    <div class="modal-body" id="modal-body">
        <form class="container-fluid form-default" name="user_edit_form">
            <div class="row tile">
                <div class="col-sm-12 form-box">
                    <div class="form-group"
                         ng-class="{'has-error': user_edit_form.$submitted && !user_edit_form.username.$valid }">
                        <label class="control-label col-md-3">Benutzername</label>
                        <div class="col-md-9">
                            <input name="username"
                                   ng-if="!ModalEditUserCtrl.userEditTemp.id" class="form-control"
                                   ng-model="ModalEditUserCtrl.userEditTemp.username"
                                   minlength="4"
                                   required
                            >
                            <span ng-if="ModalEditUserCtrl.userEditTemp.id">{{ ModalEditUserCtrl.userEditTemp.username }}</span>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 form-box">
                    <div class="form-group"
                         ng-class="{'has-error': user_edit_form.$submitted && !user_edit_form.email.$valid }">
                        <label class="control-label col-md-3">E-Mail</label>
                        <div class="col-md-9">
                            <input name="email"
                                   class="form-control"
                                   ng-model="ModalEditUserCtrl.userEditTemp.email"
                                   type="email"
                                   required
                            >
                        </div>
                    </div>
                </div>
                <div ng-if="!ModalEditUserCtrl.userEditTemp.id" class="col-sm-12 form-box">
                    <div class="form-group"
                         ng-class="{'has-error': user_edit_form.$submitted && !user_edit_form.password.$valid }">
                        <label class="control-label col-md-3">Passwort</label>
                        <div class="col-md-9">
                            <input name="password"
                                   class="form-control"
                                   ng-model="ModalEditUserCtrl.userEditTemp.password"
                                   minlength="6"
                                   required
                            >
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 form-box">
                    <fz-prop-multi-select objarray="ModalEditUserCtrl.userEditTemp.roles"
                                          valuearray="ModalEditUserCtrl.userRoles">
                    </fz-prop-multi-select>
                </div>
            </div>
        </form>
        <form class="container-fluid form-default" name="user_edit_pwd_form" ng-if="ModalEditUserCtrl.userEditTemp.id">
            <div class="row tile">
                <div class="col-sm-12 form-box">
                    <div class="form-group"
                         ng-class="{'has-error': user_edit_pwd_form.$submitted && !user_edit_pwd_form.pwd_new.$valid }">
                        <label class="control-label col-md-3">Neues Passwort</label>
                        <div class="col-md-6">
                            <input name="pwd_new"
                                   class="form-control"
                                   ng-model="ModalEditUserCtrl.pwdNew"
                                   minlength="4"
                                   required
                            >
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-primary" type="button" ng-click="ModalEditUserCtrl.changeUserPwd(user_edit_pwd_form)">Passwort ändern</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" type="button"
                ng-click="ModalEditUserCtrl.mainSelectOk(user_edit_form, ModalEditUserCtrl.userEditTemp)">Speichern
        </button>
        <button class="btn btn-default" type="button" ng-click="ModalEditUserCtrl.mainSelectDelete()">Löschen</button>
        <button class="btn btn-danger" type="button" ng-click="ModalEditUserCtrl.mainSelectCancel()">Abbrechen</button>
    </div>
</script>
<!-- END - Modal für das Bearbeiten/Anlegen eines Benutzers -->

<div class="">
    <h1>Benutzerverwaltung</h1>
    <!-- Liste aller angelegten Benutzer -->
    <div class="row">
        <div class="col-sm-12">
            <div ng-repeat="user in userAdminCtrl.allUsers | orderBy: 'username'">
                <div class="">
                    <span>{{ user.username }}</span>
                    <span class="glyphicon glyphicon-edit clickable iconsmall"
                          ng-click="userAdminCtrl.openModalEditUser(user)"
                          title="Benutzer bearbeiten"></span>
                </div>
            </div>
        </div>
    </div>
    <div class="row">&nbsp;</div>
    <div class="row">
        <div class="col-sm-12">
            <button class="btn btn-primary" ng-click="userAdminCtrl.openModalEditUser()">Neuen Benutzer anlegen</button>
        </div>
    </div>
</div>